import{S as re,i as le,s as ae,l as c,m as B,n as T,F as G,o as e,O as se,a as ne,p as U,q as r,aj as Y,w as Z,b as q,t as H,d as oe,v as W,z as ie,x as ue,ak as ge}from"./index.fd95efca.js";import{l as P}from"./leaflet.ff37b81e.js";import{e as ee}from"./fetchWrapper.486a233b.js";import{H as pe,a as de,b as ce,M as me}from"./Header.7a42f646.js";import{F as fe}from"./Footer.8c527170.js";import"./stores.ccae7de5.js";function te(o){let n,a,d;return{c(){n=c("div"),e(n,"class","h-[calc(100%-8rem)] lg:h-[calc(100%-4rem)]")},m(m,s){ne(m,n,s),a||(d=ue(o[6].call(null,n)),a=!0)},d(m){m&&oe(n),a=!1,d()}}}function he(o){let n,a,d,m,s,g,f,w,v,x,i,_,$,M,S,z,F,L,j,C,I,V,O,t,u,k,E,b,p,y,J,Q,K,R,A,N,X;a=new pe({props:{pageType:"main"}}),C=new de({}),u=new ce({}),y=new me({});let h=o[4]!==null&&o[5]!==null&&te(o);return R=new fe({props:{pageType:"main"}}),{c(){n=c("div"),B(a.$$.fragment),d=T(),m=c("div"),s=G("svg"),g=G("g"),f=G("g"),w=G("g"),v=G("polygon"),x=T(),i=c("select"),_=c("option"),_.textContent="+0 km",$=c("option"),$.textContent="+2 km",M=c("option"),M.textContent="+5 km",S=c("option"),S.textContent="+10 km",z=c("option"),z.textContent="+15 km",F=T(),L=c("button"),j=c("div"),B(C.$$.fragment),V=T(),O=c("button"),t=c("div"),B(u.$$.fragment),E=T(),b=c("button"),p=c("div"),B(y.$$.fragment),Q=T(),h&&h.c(),K=T(),B(R.$$.fragment),e(v,"id","Path-Copy"),e(v,"transform","translate(20.000000, 18.384776) rotate(135.000000) translate(-20.000000, -18.384776) "),e(v,"points","33 5.38477631 33 31.3847763 29 31.3847763 28.999 9.38379168 7 9.38477631 7 5.38477631"),e(w,"id","Icon-/-ArrowRight-Copy-2"),e(w,"transform","translate(538.000000, 183.521208)"),e(f,"id","ZahnhelferDE\u2013Icon&Asset-Download"),e(f,"transform","translate(-539.000000, -199.000000)"),e(f,"fill","#ffffff"),e(f,"fill-rule","nonzero"),e(g,"id","ZahnhelferDE\u2014Design"),e(g,"stroke","none"),e(g,"stroke-width","1"),e(g,"fill","none"),e(g,"fill-rule","evenodd"),e(s,"class","text-white bg-pine absolute top-0 right-0 m-2 pointer-events-none p-2 rounded"),e(s,"xmlns","http://www.w3.org/2000/svg"),e(s,"xmlns:xlink","http://www.w3.org/1999/xlink"),e(s,"width","40px"),e(s,"height","40px"),e(s,"viewBox","0 0 38 22"),e(s,"version","1.1"),_.selected=!0,_.__value="0",_.value=_.__value,$.__value="2000",$.value=$.__value,M.__value="5000",M.value=M.__value,S.__value="10000",S.value=S.__value,z.__value="15000",z.value=z.__value,e(i,"id","radiusSelector"),e(i,"class","text-2xl font-bold rounded border-2 border-pine text-gray-600 h-14 w-48 pl-5 pr-10 bg-white hover:border-gray-400 focus:outline-none appearance-none"),o[3]===void 0&&se(()=>o[14].call(i)),e(m,"class","absolute z-[9999] top-20 right-6"),e(j,"class","h-8 w-8 p-1 ml-auto mr-auto lg:w-12 lg:h-12 text-cocoa"),e(L,"class",I="absolute rounded-full "+(o[0]?"bg-grass":"bg-gray")+" border-pine border-2 bottom-64 right-4 h-12 w-12 lg:bottom-56 lg:h-20 lg:w-20 lg:right-20 z-[9999]"),e(t,"class","h-8 w-8 p-1 ml-auto mr-auto lg:w-12 lg:h-12 text-cocoa"),e(O,"class",k="absolute rounded-full "+(o[1]?"bg-grass":"bg-gray")+" border-pine border-2 bottom-44 right-4 h-12 w-12 lg:bottom-32 lg:h-20 lg:w-20 lg:right-20 z-[9999]"),e(p,"class","h-8 w-8 p-1 ml-auto mr-auto lg:w-12 lg:h-12 text-cocoa"),e(b,"class",J="absolute rounded-full "+(o[2]?"bg-grass":"bg-gray")+" border-pine border-2 bottom-24 right-4 h-12 w-12 lg:bottom-8 lg:h-20 lg:w-20 lg:right-20 z-[9999]"),e(n,"class","h-screen")},m(l,D){ne(l,n,D),U(a,n,null),r(n,d),r(n,m),r(m,s),r(s,g),r(g,f),r(f,w),r(w,v),r(m,x),r(m,i),r(i,_),r(i,$),r(i,M),r(i,S),r(i,z),Y(i,o[3]),r(n,F),r(n,L),r(L,j),U(C,j,null),r(n,V),r(n,O),r(O,t),U(u,t,null),r(n,E),r(n,b),r(b,p),U(y,p,null),r(n,Q),h&&h.m(n,null),r(n,K),U(R,n,null),A=!0,N||(X=[Z(i,"change",o[14]),Z(i,"change",o[10]),Z(L,"click",o[9]),Z(O,"click",o[8]),Z(b,"click",o[7])],N=!0)},p(l,[D]){D&8&&Y(i,l[3]),(!A||D&1&&I!==(I="absolute rounded-full "+(l[0]?"bg-grass":"bg-gray")+" border-pine border-2 bottom-64 right-4 h-12 w-12 lg:bottom-56 lg:h-20 lg:w-20 lg:right-20 z-[9999]"))&&e(L,"class",I),(!A||D&2&&k!==(k="absolute rounded-full "+(l[1]?"bg-grass":"bg-gray")+" border-pine border-2 bottom-44 right-4 h-12 w-12 lg:bottom-32 lg:h-20 lg:w-20 lg:right-20 z-[9999]"))&&e(O,"class",k),(!A||D&4&&J!==(J="absolute rounded-full "+(l[2]?"bg-grass":"bg-gray")+" border-pine border-2 bottom-24 right-4 h-12 w-12 lg:bottom-8 lg:h-20 lg:w-20 lg:right-20 z-[9999]"))&&e(b,"class",J),l[4]!==null&&l[5]!==null?h||(h=te(l),h.c(),h.m(n,K)):h&&(h.d(1),h=null)},i(l){A||(q(a.$$.fragment,l),q(C.$$.fragment,l),q(u.$$.fragment,l),q(y.$$.fragment,l),q(R.$$.fragment,l),A=!0)},o(l){H(a.$$.fragment,l),H(C.$$.fragment,l),H(u.$$.fragment,l),H(y.$$.fragment,l),H(R.$$.fragment,l),A=!1},d(l){l&&oe(n),W(a),W(C),W(u),W(y),h&&h.d(),W(R),N=!1,ie(X)}}}function be(o){return"endDate"in o?`<div><div>${o.title}</div><a style='cursor: pointer' href='/events/${o.id}'>Przejd\u017A do strony</a></div>`:`<div><div>${o.title}</div><a style='cursor: pointer' href='/user/${o.author.id}/posts'>Przejd\u017A do post\xF3w u\u017Cytkownika</a></div>`}function we(o,n,a){let d=null,m=null,s=null,g=null,f=!0,w=!0,v=!0,x=!1,i="0",_=null,$=!1;navigator.geolocation.getCurrentPosition(t=>{a(4,s=t.coords.latitude),a(5,g=t.coords.longitude)}),(s===null||g===null)&&(console.log("Geolocation is not supported by this browser."),fetch("http://ip-api.com/json/").then(t=>t.json()).then(t=>{a(4,s=t.lat),a(5,g=t.lon)}));function M(t){let u=P.exports.map(t).setView([s,g],13),k=P.exports.icon({iconUrl:"marker-user.png",iconSize:[25,42]});return P.exports.marker([s,g],{icon:k}).addTo(u),P.exports.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:`&copy;<a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a>,
          &copy;<a href="https://carto.com/attributions" target="_blank">CARTO</a>`,subdomains:"abcd",maxZoom:17}).addTo(u),u}function S(t,u){m!==null&&m.clearLayers(),a(13,$=!1);let k=P.exports.icon({iconUrl:"marker-user.png",iconSize:[25,42]}),E=[];t.forEach(b=>{console.log(b);let p=P.exports.marker(b.location.point.coordinates.reverse(),{interactive:!0,icon:k});p.on("click",y=>{p.bindPopup(be(b))}).openPopup(),E.push(p)}),m=P.exports.layerGroup(E).addTo(u)}function z(t){return a(11,d=M(t)),d.on("moveend",()=>{x?(console.log("on"),F()):L()}),{destroy:()=>{d.remove()}}}function F(){let t=new URLSearchParams;t.append("latitude",s),t.append("longitude",g),t.append("areEventsOn",f.toString()),t.append("areMeetingsOn",w.toString()),t.append("areAnnouncementsOn",v.toString()),t.append("maxRange",i.toString()),ee(`map/getLocationsInCircle?${t.toString()}`,"GET").then(u=>u.json()).then(u=>S(u,d))}function L(){const t=d.getBounds(),u=t._northEast.lat,k=t._southWest.lat,E=t._southWest.lng,b=t._northEast.lng;let p=new URLSearchParams;p.append("upperLat",u),p.append("lowerLat",k),p.append("leftLon",E),p.append("rightLon",b),p.append("areEventsOn",f.toString()),p.append("areMeetingsOn",w.toString()),p.append("areAnnouncementsOn",v.toString()),ee(`map/getLocationsInBox?${p.toString()}`,"GET").then(y=>y.json()).then(y=>S(y,d))}function j(){a(2,v=!v)}function C(){a(1,w=!w)}function I(){a(0,f=!f)}function V(){a(12,x=i!="0"),_!==null&&_.remove(),_=P.exports.circle([s,g],{radius:i}).addTo(d)}function O(){i=ge(this),a(3,i)}return o.$$.update=()=>{o.$$.dirty&14351&&(d!==null&&!x?L():d!==null&&x&&F())},[f,w,v,i,s,g,z,j,C,I,V,d,x,$,O]}class Le extends re{constructor(n){super(),le(this,n,we,he,ae,{})}}export{Le as default};
