import{S as x,i as ee,s as te,l as w,A,n as L,m as O,o as d,a as H,q as m,p as R,w as le,H as ne,L as F,b as g,g as W,t as D,c as Z,d as S,v as z,f as I,R as ie,e as se,T as J,N as C,O as K,af as V,ag as X}from"./index.71ef7177.js";import{F as ae,s as B}from"./Header.120bd687.js";import{B as Y}from"./Button.d7af95b7.js";import{e as M}from"./fetchWrapper.486a233b.js";import{u as oe}from"./stores.daae5b15.js";function Q(n){let e,l=n[0].description+"",t,s,f,_,h,a,b,u,p,v=n[0].author.firstName+"",c,P,j=n[0].author.lastName+"",N,y,q,E,$,G=n[4]!==null&&!n[6](),T,o,r=G&&U(n);return{c(){e=w("div"),t=A(l),f=L(),_=w("a"),h=w("div"),a=w("img"),u=L(),p=w("div"),c=A(v),P=L(),N=A(j),$=L(),r&&r.c(),T=se(),d(e,"class","border-t-2 border-shadow text-cocoa svelte-3lt51x"),d(a,"class","rounded-full"),J(a.src,b=n[0].author.profilePicture)||d(a,"src",b),d(a,"alt","Profile avatar"),d(a,"referrerpolicy","no-referrer"),d(h,"class","w-12 h-12 mr-2"),d(p,"class","text-cocoa"),d(_,"href",y=n[6]()?n[5]("/profile"):n[5](`/profile/${n[0].author.id}`)),d(_,"class","text-lg flex flex-row items-center")},m(i,k){H(i,e,k),m(e,t),H(i,f,k),H(i,_,k),m(_,h),m(h,a),m(_,u),m(_,p),m(p,c),m(p,P),m(p,N),H(i,$,k),r&&r.m(i,k),H(i,T,k),o=!0},p(i,k){(!o||k&1)&&l!==(l=i[0].description+"")&&F(t,l),(!o||k&1&&!J(a.src,b=i[0].author.profilePicture))&&d(a,"src",b),(!o||k&1)&&v!==(v=i[0].author.firstName+"")&&F(c,v),(!o||k&1)&&j!==(j=i[0].author.lastName+"")&&F(N,j),(!o||k&33&&y!==(y=i[6]()?i[5]("/profile"):i[5](`/profile/${i[0].author.id}`)))&&d(_,"href",y),k&16&&(G=i[4]!==null&&!i[6]()),G?r?(r.p(i,k),k&16&&g(r,1)):(r=U(i),r.c(),g(r,1),r.m(T.parentNode,T)):r&&(W(),D(r,1,1,()=>{r=null}),Z())},i(i){o||(C(()=>{s||(s=K(e,B,{},!0)),s.run(1)}),C(()=>{E&&E.end(1),q=V(_,B,{delay:100}),q.start()}),g(r),o=!0)},o(i){s||(s=K(e,B,{},!1)),s.run(0),q&&q.invalidate(),E=X(_,B,{}),D(r),o=!1},d(i){i&&S(e),i&&s&&s.end(),i&&S(f),i&&S(_),i&&E&&E.end(),i&&S($),r&&r.d(i),i&&S(T)}}}function U(n){let e,l,t,s,f,_;const h=[fe,re],a=[];function b(u,p){return u[3]?0:1}return l=b(n),t=a[l]=h[l](n),{c(){e=w("div"),t.c(),d(e,"class","self-center my-2")},m(u,p){H(u,e,p),a[l].m(e,null),_=!0},p(u,p){let v=l;l=b(u),l===v?a[l].p(u,p):(W(),D(a[v],1,1,()=>{a[v]=null}),Z(),t=a[l],t?t.p(u,p):(t=a[l]=h[l](u),t.c()),g(t,1),t.m(e,null))},i(u){_||(g(t),C(()=>{f&&f.end(1),s=V(e,B,{delay:100}),s.start()}),_=!0)},o(u){D(t),s&&s.invalidate(),f=X(e,B,{}),_=!1},d(u){u&&S(e),a[l].d(),u&&f&&f.end()}}}function re(n){let e,l;return e=new Y({props:{class:"text-base px-10 py-1 mx-12 my-2",clickHandler:n[7],$$slots:{default:[ue]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment)},m(t,s){R(e,t,s),l=!0},p(t,s){const f={};s&1024&&(f.$$scope={dirty:s,ctx:t}),e.$set(f)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){z(e,t)}}}function fe(n){let e,l;return e=new Y({props:{class:"text-base px-10 py-1 mx-12 my-2",clickHandler:n[8],$$slots:{default:[ce]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment)},m(t,s){R(e,t,s),l=!0},p(t,s){const f={};s&1024&&(f.$$scope={dirty:s,ctx:t}),e.$set(f)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){z(e,t)}}}function ue(n){let e;return{c(){e=A("Zapisuj\u0119 si\u0119!")},m(l,t){H(l,e,t)},d(l){l&&S(e)}}}function ce(n){let e;return{c(){e=A("Wypisuj\u0119 si\u0119!")},m(l,t){H(l,e,t)},d(l){l&&S(e)}}}function _e(n){let e,l,t,s,f=n[0].title+"",_,h,a,b,u,p,v,c=n[0].location.city.name+"",P,j,N=n[0].location.voivodeship.name+"",y,q,E,$,G,T;u=new ae({});let o=n[1]&&Q(n);return{c(){e=w("div"),l=w("div"),t=w("button"),s=w("div"),_=A(f),h=L(),a=w("div"),b=w("div"),O(u.$$.fragment),p=L(),v=w("div"),P=A(c),j=A(", "),y=A(N),q=L(),o&&o.c(),d(s,"class","font-bold text-left text-cocoa"),d(b,"class","w-6 mx-2 text-cocoa"),d(v,"class","text-cocoa text-left"),d(a,"class","flex flex-row items-center"),d(t,"class","hover:cursor-pointer"),d(l,"class","flex flex-col"),d(e,"class",E=(n[3]?"bg-tusk":"bg-olive")+" rounded-2xl m-2 p-2")},m(r,i){H(r,e,i),m(e,l),m(l,t),m(t,s),m(s,_),m(t,h),m(t,a),m(a,b),R(u,b,null),m(a,p),m(a,v),m(v,P),m(v,j),m(v,y),m(l,q),o&&o.m(l,null),$=!0,G||(T=le(t,"click",function(){ne(n[2])&&n[2].apply(this,arguments)}),G=!0)},p(r,[i]){n=r,(!$||i&1)&&f!==(f=n[0].title+"")&&F(_,f),(!$||i&1)&&c!==(c=n[0].location.city.name+"")&&F(P,c),(!$||i&1)&&N!==(N=n[0].location.voivodeship.name+"")&&F(y,N),n[1]?o?(o.p(n,i),i&2&&g(o,1)):(o=Q(n),o.c(),g(o,1),o.m(l,null)):o&&(W(),D(o,1,1,()=>{o=null}),Z()),(!$||i&8&&E!==(E=(n[3]?"bg-tusk":"bg-olive")+" rounded-2xl m-2 p-2"))&&d(e,"class",E)},i(r){$||(g(u.$$.fragment,r),g(o),$=!0)},o(r){D(u.$$.fragment,r),D(o),$=!1},d(r){r&&S(e),z(u),o&&o.d(),G=!1,T()}}}function me(n,e,l){let t,s;I(n,oe,c=>l(4,t=c)),I(n,ie,c=>l(5,s=c));let{data:f}=e,{areDetailsShown:_}=e,{clickHandler:h}=e,a=!1;const b=()=>{t!==null&&M(`announcements/isEnrolled/${f.id}`,"GET").then(c=>c.json()).then(c=>l(3,a=c))},u=()=>t!==null&&t.id===f.author.id,p=()=>{M(`announcements/enroll/${f.id}`,"GET").then(c=>b())},v=()=>{M(`announcements/unenroll/${f.id}`,"GET").then(c=>b())};return b(),n.$$set=c=>{"data"in c&&l(0,f=c.data),"areDetailsShown"in c&&l(1,_=c.areDetailsShown),"clickHandler"in c&&l(2,h=c.clickHandler)},[f,_,h,a,t,s,u,p,v]}class he extends x{constructor(e){super(),ee(this,e,me,_e,te,{data:0,areDetailsShown:1,clickHandler:2})}}export{he as A};
